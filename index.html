<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <meta name="description"
    content="CardRobots is a card game which allows you to program a robot and then fight real battles against other players.">
  <title>CardRobots</title>
  <link rel="stylesheet" href="css/pure/pure-min.css">
  <link rel="stylesheet" href="css/pure/grids-responsive-min.css">
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
  <link rel="stylesheet" href="css/styles.css">

  <script src="https://unpkg.com/konva@7.0.6/konva.min.js"></script>
</head>

<body>


  <div class="splash-container">
    <div class="splash">
      <h1 class="splash-head">
        CardRobots
      </h1>
      <p class="splash-subhead">
        CardRobots is a board game which allows you to program a robot using simple cards and then fight real battles
        against other players (using a smartphone).
      </p>
      <div class="video">
        <iframe
          src="https://www.youtube.com/embed/OCWj5xgu5Ng?version=3&amp;rel=0&amp;controls=1&amp;showinfo=0&amp;autoplay=0&amp;mute=0&amp;loop=0"
          frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
      </div>
      <p>
        <a href="#start" class="pure-button pure-button-primary">Start playing</a>
        <a href="#rules" class="pure-button pure-button-primary">Rules</a>
        <a href="#examples" class="pure-button pure-button-primary">Examples</a>
        <a href="#simulator" class="pure-button pure-button-primary">Simulator</a>
      </p>
    </div>
  </div>

  <div class="content-wrapper">

    <div class="content">
      <h2 id="start" class="content-head is-center">Start playing</h2>
      <p>To start playing <strong>CardRobots</strong> you need to print out and cut the playing cards which you can
        download here.</p>
      <p class="is-center">
        <a class="pure-button pure-button-primary" href="assets/cards1.pdf" target="_blank"><i
            class="fa fa-download"></i> Cards 1 (.pdf)</a>
        <a class="pure-button pure-button-primary" href="assets/cards2.pdf" target="_blank"><i
            class="fa fa-download"></i> Cards 2 (.pdf)</a>
      </p>
      <p>
        As soon as you have your own playing cards try to program a simple bot (following the <a
          href="#rules">rules</a>), take a picture of it and upload it into the <a href="#simulator">simulator</a>.
      </p>
    </div>
    <div class="content">
      <h2 id="rules" class="content-head is-center">Rules</h2>
      <p>The goal of the game is to program a smart robot which is able to survive in a simulated arena. The robot has
        certain sensors which he uses to decide what action to perform each turn. </p>

      <h3>Basic rules</h3>
      <ul>
        <li>The playing board consists of 5x5 squares. At the beginning of the game the participating robots are
          positioned and orientated randomly.</li>
        <li>Each robot has 5 life points at the beginning. As soon a he reaches 0 life points he is removed from the
          game.</li>
        <li>Using his programmed logic each turn the robot decides what action he wants to perform.</li>
      </ul>
      <h3>How the robots decide what actions to do</h3>
      <ul>
        <li>
          Each robot uses his topmost card and checks the <b>conditon card</b>. Depending on the outcome it will
          continue with the card below on left or right.
          It does so repeatedly until it reaches an <b>action card</b> it stops and decides to use this action.
        </li>
      </ul>

      <h3>Number cards</h3>
      <p>Number cards are used on top of some condition cards to define how the condition works. The can have one or
        more numbers on them. There are many different combinations of numbers.</p>
      <img src="assets/card_numbers.jpg" class="pure-img">

      <h3>Condition cards</h3>
      <p>Some condition cards (the first three) have an empty space on them. It is used to add a number card to define
        how the condition works.</p>
      <table>
        <tr>
          <td><img style="width:200px;" src="assets/card_enemycheck.JPG" /></td>
          <td>Is there another robot in front and at which distance? If it is equal to one of the numbers displayed on
            the number card - continue left otherwise continue right.</td>
        </tr>
        <tr>
          <td><img style="width:200px;" src="assets/card_heartcheck.JPG" /></td>
          <td>How many life points does the robot have left? If it is equal to one of the numbers displayed on the
            number card - continue left otherwise continue right.</td>
        </tr>
        <tr>
          <td><img style="width:200px;" src="assets/card_wallcheck.JPG" /></td>
          <td>The distance to the edge of the board is measured. If it is equal to one of the numbers displayed on the
            number card - continue left otherwise continue right.</td>
        </tr>
        <tr>
          <td><img style="width:200px;" src="assets/card_alertcheck.JPG" /></td>
          <td>Checks if the robot could be attacked by another robot (is in shooting distance).</td>
        </tr>
        <tr>
          <td><img style="width:200px;" src="assets/card_directviewcheck.JPG" /></td>
          <td>Checks if another robot is in front of this robot and looking directly towards it.</td>
        </tr>
        <tr>
          <td><img style="width:200px;" src="assets/card_random.jpg" /></td>
          <td>When the random card is used each time a coin is flipped and depending on the outcome it continues left
            otherwise right.</td>
        </tr>
      </table>

      <h3>Action cards</h3>
      <table>
        <tr>
          <td><img style="width:100px;" src="assets/card_goahead.jpg" /></td>
          <td>Move one step ahead.</td>
        </tr>
        <tr>
          <td><img style="width:100px;" src="assets/card_goleft.jpg" /></td>
          <td>Move one step left.</td>
        </tr>
        <tr>
          <td><img style="width:100px;" src="assets/card_goright.jpg" /></td>
          <td>Move one step right.</td>
        </tr>
        <tr>
          <td><img style="width:100px;" src="assets/card_goback.jpg" /></td>
          <td>Move one step backwards.</td>
        </tr>
        <tr>
          <td><img style="width:100px;" src="assets/card_turnleft.jpg" /></td>
          <td>Turn left staying in the same position.</td>
        </tr>
        <tr>
          <td><img style="width:100px;" src="assets/card_turnright.jpg" /></td>
          <td>Turn right staying in the same position.</td>
        </tr>
        <tr>
          <td><img style="width:100px;" src="assets/card_attack.jpg" /></td>
          <td>Attack robot in front (does 3 damage if there is a another robot 1 position away, 2 damage if 2 positions
            away, 1 damage if 3 positions away).</td>
        </tr>
        <tr>
          <td><img style="width:100px;" src="assets/card_nothing.jpg" /></td>
          <td>Do nothing (this recovers 1 life point).</td>
        </tr>
      </table>

      <h3>Special cases</h3>
      <ul>
        <li>Attack actions are always excecuted AFTER movements, so it is possible to escape an attack.</li>
        <li>If a robot decide to walk onto and occupied space or outside the game board - he looses 1 life point</li>
        <li>If two (or more) robots decide to walk onto the same space - Both loose 1 life point</li>
      </ul>
    </div>

    <div class="content is-center">
      <h2 id="examples" class="content-head">Examples</h2>

      <div class="pure-g">
        <div class="l-box pure-u-1 pure-u-md-1-2 pure-u-lg-1-4">
          <h3 class="content-subhead">
            Basic bot
          </h3>
          <img src="bots/simple.jpg" class="pure-img" />
          <p>If the robot is standing on the edge of the board (distance 1 to the edge) turn right otherwise go ahead.
          </p>
        </div>
        <div class="l-box pure-u-1 pure-u-md-1-2 pure-u-lg-1-4">
          <h3 class="content-subhead">
            Simple bot
          </h3>
          <img src="bots/basic.jpg" class="pure-img" />
          <p>
            If enemy is visible and at 1, 2 or 3 distance, attack, otherwise if player is under attack move to the right
            or
            left (with a probability of 50%), if player is standing on the edge of the board turn left otherwise go
            ahead.
          </p>
        </div>
        <div class="l-box pure-u-1 pure-u-md-1-2 pure-u-lg-1-4">
          <h3 class="content-subhead">
            Advanced bot
          </h3>
          <img src="bots/advanced.jpg" class="pure-img" />
          <p>
            Bot using even more advanced strategy.
          </p>
        </div>
        <div class="l-box pure-u-1 pure-u-md-1-2 pure-u-lg-1-4">
          <h3 class="content-subhead">
            Complete bot
          </h3>
          <img src="bots/complete.jpg" class="pure-img" />
          <p>
            Bot using complete strategy using all available cards
          </p>
        </div>
      </div>
    </div>

    <div class="content is-center">
      <h2 id="simulator" class="content-head">Simulator</h2>

      <p>Here you can upload your robot program and test it against other robots. If there is a problem with your
        program (if your program doesn't follow the rules or if the picture can not be read it will tell you what the
        problems could be)</p>

      <div class="pure-g">
        <div class="pure-u-1-2">
          <h3>Player 1</h3>
          <p>
            <button class="button-xlarge pure-button pure-button-primary"><i class="fa fa-camera"></i> Take Image and
              Upload</button>
          </p>
          <p>or
            <select class="tree2" onchange="loadFile(event)">
              <option value="">choose example bot</option>
              <option value="bots/simple.jpg">Example 1</option>
              <option value="bots/basic.jpg">Example 2</option>
              <option value="bots/advanced.jpg">Example 3</option>
              <option value="bots/complete.jpg">Example 4</option>
            </select>
          </p>
          <img src="bots/basic.jpg" class="pure-img">
        </div>
        <div class="pure-u-1-2">
          <h3>Player 2</h3>
          <p>
            <button class="button-xlarge pure-button pure-button-primary"><i class="fa fa-camera"></i> Take Image and
              Upload</button>
          </p>
          <p>or
            <select class="tree2" onchange="loadFile(event)">
              <option value="">choose example bot</option>
              <option value="bots/simple.jpg">Example 1</option>
              <option value="bots/basic.jpg">Example 2</option>
              <option value="bots/advanced.jpg">Example 3</option>
              <option value="bots/complete.jpg">Example 4</option>
            </select>
          </p>
          <img src="bots/basic.jpg" class="pure-img">
        </div>
      </div>

      <div style="width: 500px; margin: auto; margin-top: 40px;">
        <button class="pure-button pure-button-primary">New Game</button>
        <button class="pure-button pure-button-primary">Start</button>
        <button class="pure-button pure-button-primary">Stop</button>
        <div id="simulation" style="width: 500px; height: 500px;margin-top: 20px;">
          
        </div>
      </div>

    </div>


  </div>

</body>


<script>
  function initStage(images) {
    var stage = new Konva.Stage({
      container: 'simulation',
      width: 500,
      height: 500
    });

    // grid
    var backgroundLayer = new Konva.Layer();
    {
      let rect = new Konva.Rect({
        x: 0,
        y: 0,
        width: 500,
        height: 500,
        stroke: 'black',
        strokeWidth: 8,
      })
      backgroundLayer.add(rect)
    }

    for (let x = 0; x < 5; x++) {
      let rect = new Konva.Rect({
        x: x * 100,
        y: 0,
        width: 100,
        height: 500,
        stroke: 'black',
        strokeWidth: 1,
      })
      backgroundLayer.add(rect)
    }
    for (let y = 0; y < 5; y++) {
      let rect = new Konva.Rect({
        x: 0,
        y: 100 * y,
        width: 500,
        height: 100,
        stroke: 'black',
        strokeWidth: 1,
      })
      backgroundLayer.add(rect)
    }
    stage.add(backgroundLayer);

    var playerLayer = new Konva.Layer();
    stage.add(playerLayer);

    var animations = {
      idle: [
        0, 0, 90, 90, 90, 0, 90, 90,
      ],
      punch: [
        0, 0, 90, 90, 90, 0, 90, 90,
      ],
    };

    var imageObj = new Image();
    imageObj.src = "assets/sprite.png"
    imageObj.onload = function () {
      var player1 = new Konva.Sprite({
        x: 5,
        y: 5,
        image: imageObj,
        animation: 'idle',
        animations: animations,
        frameRate: 1,
        frameIndex: 0,
      });

      playerLayer.add(player1);
      player1.start();

      var player2 = new Konva.Sprite({
        x: 205,
        y: 205,
        image: imageObj,
        animation: 'idle',
        animations: animations,
        frameRate: 2,
        frameIndex: 0,
      });

      playerLayer.add(player2);
      player2.start();
    }

  }

  initStage();
</script>

</html>